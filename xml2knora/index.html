



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/dasch-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>knora-xml-import - Knora-Py Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../assets/style/theme.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-blue" data-md-color-accent="deep-blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#knora-xml-import" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Knora-Py Documentation" class="md-header-nav__button md-logo">
          
            <img src="../assets/images/dasch-icon-white.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Knora-Py Documentation
            </span>
            <span class="md-header-nav__topic">
              
                knora-xml-import
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Knora-Py Documentation" class="md-nav__button md-logo">
      
        <img src="../assets/images/dasch-icon-white.svg" width="48" height="48">
      
    </a>
    Knora-Py Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../create_ontology/" title="knora-create_ontology" class="md-nav__link">
      knora-create_ontology
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        knora-xml-import
      </label>
    
    <a href="./" title="knora-xml-import" class="md-nav__link md-nav__link--active">
      knora-xml-import
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-folder" class="md-nav__link">
    Data folder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knora-import-xml-format" class="md-nav__link">
    Knora import XML format
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preample" class="md-nav__link">
    Preample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#knora-tag" class="md-nav__link">
    knora-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-tag" class="md-nav__link">
    resource-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-and-values" class="md-nav__link">
    Properties and values
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltimagegt-tag" class="md-nav__link">
    \&lt;image\&gt;-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lttext-propgt-tag" class="md-nav__link">
    \&lt;text-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lttextgt-tag" class="md-nav__link">
    \&lt;text\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ltcolor-propgt-tag" class="md-nav__link">
    \&lt;color-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltcolorgt-tag" class="md-nav__link">
    \&lt;color\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ltdate-propgt-tag" class="md-nav__link">
    \&lt;date-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltdategt-tag" class="md-nav__link">
    \&lt;date\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../knoractl/" title="Knoractl" class="md-nav__link">
      Knoractl
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-folder" class="md-nav__link">
    Data folder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knora-import-xml-format" class="md-nav__link">
    Knora import XML format
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preample" class="md-nav__link">
    Preample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#knora-tag" class="md-nav__link">
    knora-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-tag" class="md-nav__link">
    resource-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-and-values" class="md-nav__link">
    Properties and values
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltimagegt-tag" class="md-nav__link">
    \&lt;image\&gt;-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lttext-propgt-tag" class="md-nav__link">
    \&lt;text-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lttextgt-tag" class="md-nav__link">
    \&lt;text\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ltcolor-propgt-tag" class="md-nav__link">
    \&lt;color-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltcolorgt-tag" class="md-nav__link">
    \&lt;color\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ltdate-propgt-tag" class="md-nav__link">
    \&lt;date-prop\&gt;-tag
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ltdategt-tag" class="md-nav__link">
    \&lt;date\&gt;-tag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p><a href="https://badge.fury.io/py/knora"><img alt="PyPI version" src="https://badge.fury.io/py/knora.svg" /></a></p>
<h1 id="knora-xml-import">knora-xml-import</h1>
<p>Use <code>knora-xml-import</code> for importing data from an XML-file into knora.</p>
<h2 id="usage">Usage:</h2>
<pre><code class="bash">$ knora-xml-import project-show-name
</code></pre>

<p>It supports the following options:</p>
<ul>
<li><em>"-s server" | "--server server"</em>: The URl of the Knora server [default: http://0.0.0.0:3333]</li>
<li><em>"-S sipi-server" | "--sipi sipi-server"</em>: The URL of the SIPI IIIF server [default: http://0.0.0.0:1024]</li>
<li><em>"-u username" | "--user username"</em>: Username to log into Knora [default: root@example.com]</li>
<li><em>"-p password" | "--password password"</em>: The password for login to the Knora server [default: test]</li>
<li><em>"-F folder" | "--folder folder"</em>: Folder containing the XML-file with the data and the images [default: <code>project-short-name</code>.dir]</li>
</ul>
<h2 id="data-folder">Data folder</h2>
<p>The data folder contains the
- the XML file that has the same name as the project with the extension <code>.xml</code>
- an optional directory called <code>assets</code> that contains icons etc.
- a directory called <code>images</code> containing the images for StillImageResources
- may contain the project ontology definition as JSON file</p>
<h2 id="knora-import-xml-format">Knora import XML format</h2>
<h3 id="preample">Preample</h3>
<p>The import file must start with the standard XML header:</p>
<pre><code class="xml">&lt;?xml version='1.0' encoding='utf-8'?&gt;
</code></pre>

<h3 id="knora-tag"><code>knora</code>-tag</h3>
<p>The <code>knora</code>-tag describes a set of resources that are to be imported. It is the
container for an arbitrary number of <code>resource</code> tags and may only
contain resource tags.
The <code>knora</code>-tag defines has the following options:
- <em>xmlns:xsi</em>: <code>"http://www.w3.org/2001/XMLSchema-instance"</code> [required]
- <em>xsi:schemaLocation</em>: Path to knora XML schema file for validation [optional]
- <em>shortcode</em>: Knora project shortcode, e.g. "0801" [required]
- <em>vocabulary</em>: Name of the ontology [required]
Thus, the knora-tag may b used as follows:</p>
<pre><code class="xml">&lt;knora
 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
 xsi:schemaLocation=&quot;../knora-data-schema.xsd&quot;
 shortcode=&quot;0806&quot;
 vocabulary=&quot;webern&quot;&gt;
…
&lt;/knora&gt;

</code></pre>

<h3 id="resource-tag"><code>resource</code>-tag</h3>
<p>A <code>resource</code>-tag contains all necessary information to create a resource. It
has th following options:
- <em>label</em>: The label, a human readable, semantical meaningfull short name of the resource [required]
- <em>restype</em>: The resource type as defined within the ontology [required]
- <em>unique_id</em>: A unique, arbitrary string giving a unique ID to the resource. This ID is only used during the
import process for referencing this resource from other resources. During the import process, it will be replaced by
the IRI used internally by Knora.</p>
<pre><code>&lt;resource label=&quot;EURUS015a&quot; restype=&quot;Postcard&quot; unique_id=&quot;238807&quot;&gt;
…
&lt;/resource&gt;
</code></pre>

<p>The resource-tag may contain the following tags describing properties (data fields):
- <em>\&lt;image></em>: In case of the StillImageResource contains the path to the image file.
- <em>\&lt;text-prop></em>: Contains text values
- <em>\&lt;color-prop></em>: Contains color values
- <em>\&lt;date-prop></em>: Contains date values
- <em>\&lt;float-prop></em>: Contains decimal values
- <em>\&lt;geometry-prop></em>: Contains a JSON geometry definition for a region
- <em>\&lt;geoname-prop></em>: Contains a geoname.org location code
- <em>\&lt;list-prop></em>: Contains list tag labels
- <em>\&lt;iconclass-prop></em>: Contains iconclass.org codes
- <em>\&lt;integer-prop></em>: Contains integer values
- <em>\&lt;interval-prop></em>: Contains interval values
- <em>\&lt;period-prop></em>: Contains time period values
- <em>\&lt;resptr-prop></em>: Contains links othr resources
- <em>\&lt;time-prop></em>: Contains time values
- <em>\&lt;uri-prop></em>: Contains URI values
- <em>\&lt;boolean-prop></em>: Contaibs boolean values</p>
<h2 id="properties-and-values">Properties and values</h2>
<h3 id="ltimagegt-tag"><code>\&lt;image\&gt;</code>-tag</h3>
<p>The image property contains the path to an image file. It must only be used if the
resource is a <code>StillImageResource</code>!</p>
<p><em>Note</em>: There is only <em>one</em> \&lt;image> tag allowed per StillImageResource!</p>
<p>Example:</p>
<pre><code class="xml">&lt;image&gt;postcards.dir/images/EURUS015a.jpg&lt;/image&gt;
</code></pre>

<h3 id="lttext-propgt-tag"><code>\&lt;text-prop\&gt;</code>-tag</h3>
<p>The text property tag is used to list text values. It has one mandatory options:
- <em>name</em>: Name of the property as given in the ontology</p>
<p>Example:</p>
<pre><code class="xml">&lt;text-prop name=&quot;hasTranslation&quot;&gt;
</code></pre>

<p>The <code>\&lt;text-prop\&gt;</code>-tag must contain at least one <code>\&lt;text\&gt;</code>-tag. There are several variants of text tags:</p>
<h4 id="lttextgt-tag"><code>\&lt;text\&gt;</code>-tag</h4>
<p>The <code>\&lt;text\&gt;</code>-tag has the following options:
- <em>encoding</em>: either "utf8" or "hex64" [required]
  - <em>utf8</em>: The tag describes a simple text without markup. The text is a simple utf-8 string
  - <em>hex64</em>: The tag describes a complex text containing markup. It must be a hex64 encoded string in the
  XML-format as defined by Knora.
- <em>resrefs</em>: A list of resource ID's that are referenced in the markup, separated by the "|"-character such as <code>"2569981|6618"</code> [optional]</p>
<p>Knora-xml-import assumes that standard mapping for Knora is being used (Custom mapping to
customized standoff tags is not yet implemented!)</p>
<p>E.g. a text containing a link to another resource must be encoded like follows:</p>
<pre><code class="xml">'Brief: &lt;a class=&quot;salsah-link&quot; href=&quot;IRI:6618:IRI&quot;&gt;&lt;p&gt;Webern an Willheim, 10.10.1928&lt;/p&gt;&lt;/a&gt;'
</code></pre>

<p>Please note that the href-option withiin the anchor tag points to an internal resource of knora
and this has to have the special format "<code>IRI:</code>res-id<code>:IRI</code>" where res-id is the resource
id defined within the XML import file. At the moment it is not yet possible to reference
already existing resources using the Knora-IRI (will b implemented soon).</p>
<p>In case the string references one or more internal resources, the option <code>rsrefs</code><em>must</em> be using to
indicate there ID's! The string must be encoded using standard hex64 encoding.</p>
<p>A complete example for a simple text:</p>
<pre><code class="xml">&lt;text-prop name=&quot;hasComment&quot;&gt;
   &lt;text encoding=&quot;utf8&quot;&gt;Probe bei &quot;Wimberger&quot;. Lokal in Wien?&lt;/text&gt;
&lt;/text-prop&gt;
</code></pre>

<p>A complete example of a complex text which encodes the text <code>&lt;a class="salsah-link" href="IRI:6618:IRI"&gt;&lt;p&gt;Webern an Willheim, 10.10.1928&lt;/p&gt;&lt;/a&gt;&lt;p&gt;&lt;/p&gt;</code> containing
a link to the internal resource with the ID="6618":</p>
<pre><code class="xml">&lt;text-prop name=&quot;hasComment&quot;&gt;
      &lt;text resrefs=&quot;6618&quot; encoding=&quot;hex64&quot;&gt;PGEgY2xhc3M9InNhbHNhaC1saW5rIiBocmVmPSJJUkk6NjYxODpJUkkiPjxwPldlYmVybiBhbiBXaWxsaGVpbSwgMTAuMTAuMTkyODwvcD48L2E+PHA+PC9wPg==&lt;/text&gt;
&lt;/text-prop&gt;
</code></pre>

<p>Within one property, simple and complex text values may be mixed.</p>
<h3 id="ltcolor-propgt-tag"><code>\&lt;color-prop\&gt;</code>-tag</h3>
<p>The color-prop tag is used to define a color property. It has one mandatory options:
- <em>name</em>: Name of the property as given in the ontology</p>
<h4 id="ltcolorgt-tag"><code>\&lt;color\&gt;</code>-tag</h4>
<p>The color-tag is used to indicate a color value. The color has to be giiven in
web-notation, that is a "#" followed by 3 or 6 hex numerals.</p>
<p>A propery with 2 color valus would be defined as follows:</p>
<pre><code class="xml">&lt;color-prop name=&quot;hasColor&quot;&gt;
    &lt;color&gt;#00ff66&lt;/color&gt;
    &lt;color&gt;#ff00ff&lt;/color&gt;
&lt;/color-prop&gt;
</code></pre>

<h3 id="ltdate-propgt-tag"><code>\&lt;date-prop\&gt;</code>-tag</h3>
<p>Is used to define knora dates. Options:
- <em>name</em>: Name of the property as given in the ontology</p>
<h4 id="ltdategt-tag"><code>\&lt;date\&gt;</code>-tag</h4>
<p>A Knora date value. It has the following format:</p>
<pre><code>calendar:epoch:yyyy-mm-dd:epoch:yyyy-mm-dd
</code></pre>

<ul>
<li><em>calendar</em>: either "JULIAN" or "GREGORIAN" [optional, default: GREGORIAN]</li>
<li><em>epoch</em>: either "BCE" or "CE" [optional, default CE]</li>
<li><em>yyyy</em>: year with four digits (at least one must be given)</li>
<li><em>mm</em>: month with two digits 01, 02, .., 12</li>
<li><em>dd</em>: day eith two digits</li>
</ul>
<p>If two dates are given, the date is in between the two given borders.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../create_ontology/" title="knora-create_ontology" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                knora-create_ontology
              </span>
            </div>
          </a>
        
        
          <a href="../knoractl/" title="Knoractl" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Knoractl
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>